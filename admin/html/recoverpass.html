<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>recovery</title>
    <link rel="stylesheet" href="../css/login.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="assets/js/jquery.slimscroll.min.js"></script>
    <style>
        .otp-message {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .otp-message span {
            display: inline;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="inner">
            <form>
                <div id="forgotPasswordForm">
                    <div class="form-holder">
                        <h2 class="text-center">Forgot Password?</h2>
                        <input type="email" id="emailInput" class="form-control mt-3 mb-3"
                            placeholder="Enter your email">
                        <div id="emailError" style="color: red; display: none;">Email is required</div>
                        <button id="confirmButton">Confirm</button>
                    </div>
                </div>
                <div id="otpForm" style="display:none;">
                    <div class="form-holder">
                        <h2 class="text-center">Enter OTP</h2>
                        <p class="otp-message text-center mt-2">We sent OTP to your number ********74</p>
                        <input type="text" class="form-control mt-3 mb-3" id="otpInput" placeholder="Enter OTP">
                        <button id="verifyButton">Verify</button>
                    </div>
                </div>
            </form>            
            <div id="message" style="display:none;">
                <p>OTP sent successfully!</p>
            </div>
        </div>
    </div>
</body>

   <script>
document.addEventListener("DOMContentLoaded", function () {
    const forgotPasswordForm = document.getElementById("forgotPasswordForm");
    const otpForm = document.getElementById("otpForm");
    const message = document.getElementById("message");
    const emailInput = document.getElementById("emailInput");
    const emailError = document.getElementById("emailError");
    const confirmButton = document.getElementById("confirmButton");
    const verifyButton = document.getElementById("verifyButton");

    confirmButton.addEventListener("click", function (event) {
        event.preventDefault(); // Prevent default form submission behavior
        
        const email = emailInput.value.trim();
        if (!email) {
            emailError.style.display = "block";
            return;
        }
        if (!validateEmail(email)) {
            alert("Invalid email format. Please enter a valid email address.");
            return;
        }
        // Assuming you have a function to send OTP to email
        sendOTP(email);
        // Display OTP form
        forgotPasswordForm.style.display = "none";
        otpForm.style.display = "block";
        // Display phone number (example)
        document.getElementById("phoneNumber").textContent = "*****67";
    });

    verifyButton.addEventListener("click", function () {
        const otp = document.getElementById("otpInput").value;
        if (verifyOTP(otp)) {
            // Show success message
            otpForm.style.display = "none";
            message.style.display = "block";
        } else {
            // Show error message or retry prompt
            alert("Invalid OTP. Please try again.");
        }
    });

    // Function to send OTP (replace with your actual implementation)
    function sendOTP(email) {
        console.log("Sending OTP to: " + email);
    }

    // Function to verify OTP (replace with your actual implementation)
    function verifyOTP(otp) {
        // Dummy verification, you should implement your own logic
        return otp === "123456"; // Change "123456" to your actual OTP
    }

    // Function to validate email format
    function validateEmail(email) {
        const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return regex.test(email);
    }
});
</script>

</html>